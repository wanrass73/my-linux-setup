<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LSD Config Tutorial</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <header>
        <h1>LSD Config Tutorial</h1>
    </header>
    <main>
        <h2>Configuring LSDeluxe (<code>lsd</code>) for a Visually Enhanced Terminal</h2>
        <p>This tutorial explains how to configure <code>lsd</code> (LSDeluxe), a modern replacement for the <code>ls</code> command, to provide a visually rich file listing experience with icons, vibrant colors, and a tree view. It also covers its integration with Zsh and <code>vivid</code> for optimal color management.</p>

        <h3>Components:</h3>
        <ul>
            <li><code>lsd</code> (LSDeluxe): The core tool for enhanced file listings.</li>
            <li><code>~/.config/lsd/config.yaml</code>: The primary configuration file for <code>lsd</code>.</li>
            <li><code>vivid</code>: A tool used to generate <code>LS_COLORS</code> for comprehensive terminal coloring.</li>
            <li><code>~/.zshrc</code>: Your Zsh shell configuration file, where <code>vivid</code> is enabled and <code>LS_COLORS</code> are filtered.</li>
        </ul>

        <h3>Steps:</h3>

        <ol>
            <li>
                <h4>Understanding <code>lsd</code>'s Role:</h4>
                <p><code>lsd</code> is designed to replace the traditional <code>ls</code> command, offering features like file type icons, color-coded output, and a more organized display, including a tree view.</p>
            </li>
            <li>
                <h4><code>lsd</code> Configuration (<code>~/.config/lsd/config.yaml</code>):</h4>
                <p>To achieve the desired visual output, you need to create or update your <code>~/.config/lsd/config.yaml</code> file with specific settings.</p>
                <p><strong>Content for <code>~/.config/lsd/config.yaml</code>:</strong></p>
                <pre><code class="language-yaml">icon: auto
color:
  when: always
layout: tree
</code></pre>
                <p><strong>Explanation:</strong></p>
                <ul>
                    <li><code>icon: auto</code>: Enables automatic display of icons for different file types.</li>
                    <li><code>color: when: always</code>: Ensures that colors are always displayed, even when output is piped.</li>
                    <li><code>layout: tree</code>: Sets the default display layout to a tree view, which is particularly useful for visualizing directory structures.</li>
                </ul>
            </li>
            <li>
                <h4>Color Management with <code>vivid</code> and <code>LS_COLORS</code>:</h4>
                <p><code>lsd</code> relies on the <code>LS_COLORS</code> environment variable for its color definitions. The <code>vivid</code> tool is used to generate a comprehensive <code>LS_COLORS</code> string.</p>
                <p><strong>Important:</strong> Ensure that <code>~/.config/lsd/colors.yaml</code> is <strong>removed</strong> if it exists. This ensures <code>lsd</code> uses the <code>LS_COLORS</code> generated by <code>vivid</code> rather than its own internal color definitions, preventing conflicts and ensuring consistent coloring.</p>
            </li>
            <li>
                <h4>Zsh (<code>.zshrc</code>) Configuration for <code>lsd</code> and <code>vivid</code> Integration:</h4>
                <p>Your <code>~/.zshrc</code> file needs to be configured to enable <code>vivid</code> and filter <code>LS_COLORS</code> to remove unwanted background colors.</p>
                <p><strong>Add the following lines to your <code>~/.zshrc</code>:</strong></p>
                <pre><code class="language-zsh"># Enable vivid for LS_COLORS
eval "$(vivid generate zsh)"

# Filter LS_COLORS to remove distracting background colors (e.g., green background '42')
export LS_COLORS="${LS_COLORS//;42/}"
</code></pre>
                <p><strong>Note:</strong> The <code>export LS_COLORS</code> line should be placed <em>after</em> <code>eval "$(vivid generate zsh)"</code> to ensure the filtering is applied to the <code>vivid</code>-generated colors.</p>
                <p>You might also have aliases in your <code>.zshrc</code> to make <code>lsd</code> the default <code>ls</code> command and to easily access its tree view:</p>
                <pre><code class="language-zsh">alias ls='lsd'
alias lt='lsd --tree'
</code></pre>
            </li>
            <li>
                <h4>Applying Configurations:</h4>
                <ul>
                    <li><strong>Create/Update <code>~/.config/lsd/config.yaml</code></strong> with the content provided in step 2.</li>
                    <li><strong>Remove <code>~/.config/lsd/colors.yaml</code></strong> if it exists: <code>rm -f ~/.config/lsd/colors.yaml</code></li>
                    <li><strong>Update your <code>~/.zshrc</code></strong> with the <code>vivid</code> and <code>LS_COLORS</code> filtering lines from step 4.</li>
                    <li><strong>Open a new terminal window</strong> or source your <code>.zshrc</code> (<code>source ~/.zshrc</code>) for the changes to take effect.</li>
                </ul>
            </li>
        </ol>

        <h3>Troubleshooting:</h3>
        <ul>
            <li><strong>Green Background in <code>lsd</code> output:</strong> This usually means the <code>LS_COLORS</code> filtering in your <code>.zshrc</code> is not correctly applied or is being overridden. Ensure the <code>export LS_COLORS="${LS_COLORS//;42/}"</code> line is present and executed after <code>vivid generate zsh</code>.</li>
            <li><strong><code>lsd</code> Configuration Errors:</strong> Double-check the YAML syntax in <code>~/.config/lsd/config.yaml</code>.</li>
        </ul>
        
        <a href="../index.html">Back to Home</a>
    </main>
    <footer>
        <p>&copy; 2025 wanrass73. All rights reserved.</p>
    </footer>
</body>
</html>